!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("@hatiolab/things-scene"),require("bwip-js"),require("underscore")):"function"==typeof define&&define.amd?define(["@hatiolab/things-scene","bwip-js","underscore"],t):(e=e||self)["things-scene-label"]=t(e.scene,e.bwipjs,e.underscore)}(this,function(e,t,a){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;const i={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"select",label:"symbol",name:"symbol",property:{options:["code11","code39","code93","code128","codebar","ean128","ean13","ean8","qrcode","datamatrix","industrial2of5","interleaved2of5","msi","planet","postnet","upca","upce","pdf417","isbn"]}},{type:"checkbox",label:"monochrome",name:"monochrome"},{type:"checkbox",label:"show-text",name:"showText"}],"value-property":"text"},s=["symbol","text","showText","height","width"];class n extends(e.RectPath(e.Shape)){static get nature(){return i}get canvas(){return this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.style.display="none",this._canvas.height=1,this._canvas.width=1),this._canvas}dispose(){super.dispose()}ready(){super.ready(),this.buildImage()}buildImage(){if(!this._image){var{symbol:e,text:a,width:i,height:s,includetext:n,textAlign:o}=this.state;this.canvas.width=i,this.canvas.height=s,t(this.canvas,{bcid:e,text:a,height:s,width:i,includetext:n,textxalign:o},(e,t)=>{e||(this._image=t,this.invalidate())})}}render(t){var{left:a=0,top:i=0,width:s=0,height:n=10}=this.state;try{this._image&&t.drawImage(this._image,a,i,s,n)}catch(t){e.error(t)}}drawText(){}onchange(e){s.every(t=>!(t in e)||(delete this._image,this.buildImage(),!1))}}return e.Component.register("barcode",n),[n]});
